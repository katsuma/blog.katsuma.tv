---
title: プレゼンテーションライブラリS6の使い方（入門編）
date: 2008/01/28 00:00:22
tags: javascript
published: true

---

<p>
身内で勉強会のようなものを行う機会があったので、<a href="http://d.hatena.ne.jp/amachang/20071121/1195627344">amachangのJavaScriptによるプレゼンテーションライブラリ</a>のS6を利用してみました。
すぐに直感的に利用できる部分もある一方で、スタイルの反映のさせ方でハマった点もあったんで、そのあたりをまとめておこうと思います。
</p>

<h3>ファイル構成</h3>
<p>S6のファイルはamachangのプレゼンページからソースが取得できます。たとえば<a href="http://amachang.art-code.org/ejohn/">ここ</a>から。（まとまった公式ページってどこかにあるのかな？）S6本体のJavaScriptは、ページングやアクション処理などがまとまって定義されています。「右ボタン」で次のページ、「左ボタン」で前のページに戻る、などのイベント処理はHTMLの方で記述されています。</p>

<p>スライドを作っていくには、本体のS6自体に手を入れることは必要なく、HTMLにどんどんスライド内容と、必要があればエフェクト処理とスタイルの設定を追記していきます。アクション処理とスタイルについては、後で詳しく述べたいと思います。</p>




<h3>基本は１スライドに１div要素</h3>
<p>S6でのスライドは、div要素毎に分かれています。つまり、</p>

<p>
<pre>
&lt;div&gt; ... &lt;/div&gt;
</pre>
</p>

<p>で囲まれた範囲が１スライドにあたり、（元サンプルのHTMLを変更しないかぎり）左右のボタンでdiv要素のdisplay="none"を切り替えていくことで、ページング処理を行っています。</p>

<p>プレゼンテーションの内容は、このdiv内に追加していくことになるのですが、基本的にはh2, li, p, pre, tableあたりの要素でマークアップしていけばOKだと思います。</p>



<h3>要素の特定方法</h3>
<p>特に何も指定せずに内容を書いていくと、文字が大きすぎて困り、スタイルを変更したなくなるケースも出てくるかと思います。
スタイルを変更させるためには、変更対象の要素を特定させる必要があります。
要素の特定はdiv要素内で次のような構文で行います。</p>

<p>
<pre>
&lt;script&gt;
s6.page({
	styles : {
		'<要素のセレクタ>' : {JSONによるスタイル指定}
	}
});
&lt;/script&gt;
</pre>
</p>

<p>たとえば、</p>

<p>
<pre>
 &lt;div&gt;
   &lt;h2&gt;ざっくりまとめ&lt;/h2&gt;
   &lt;p&gt;Firebug++&lt;/p&gt;
   &lt;p&gt;Firefoxもっと使おう！&lt;/p&gt;
 &lt;/div&gt; </pre>
</p>

<p>というスライドがあった場合に、p要素のフォントサイズを「70%」に変更しようとすると、次のようなコードになります。</p>

<p>
<pre>
 &lt;div&gt;
   &lt;h2&gt;ざっくりまとめ&lt;/h2&gt;
   &lt;p&gt;Firebug++&lt;/p&gt;
   &lt;p&gt;Firefoxもっと使おう！&lt;/p&gt;
 &lt;/div&gt;
 &lt;script&gt;
s6.page({
	styles : {
		'p' : {fontSize : '70%'}
	}
});
&lt;/script&gt;
 </pre>
</p>

<p>1つめのポイントは、フォントサイズのスタイルは、CSSでは「font-size」と記述しますが、JSでは「fontSize」と記述する点。
このあたりのプロパティ名の対応ルールは直感的に分かると思います。スタイルを複数設定する場合、たとえば上記の例では
marginもあわせて設定する場合は次のように書けます。</p>

<p>
<pre>
s6.page({
	styles : {
		'p' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>

<p>要するにpプロパティの値としてオブジェクトを持ち、そのオブジェクト要素にスタイルを追加していく、ということになりますね。このように、スタイルの変更、および
後で述べるアクションの追加の際にはグローバル領域のs6オブジェクトのpageメソッドにプロパティをいろいろ追加していくことで実現できます。</p>

<p>それでは、li要素だとどうなるでしょう？CSS風に書くと</p>

<p>
<pre>
s6.page({
	styles : {
		'li' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>

<p>か</p>

<p>
<pre>
s6.page({
	styles : {
		'ul li' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>

<p>みたいに書けるかと思いますが、S6では残念ながらこの記法では入れ子になった要素（この場合のli）は
選択できません。では、どうするかと言うと、子要素へのアクセスは「/」を利用します。つまり、</p>

<p>
<pre>
s6.page({
	styles : {
		'<strong>ul/li</strong>' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>

<p>と、書きます。（これがなかなか分からずに苦労しました。。） tableのtd要素だと</p>

<p>
<pre>
s6.page({
	styles : {
		'<strong>table/thead/tr/td</strong>' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>

<p>の、ようになりますね。</p>

<p>また、複数の要素がある場合は、それぞれの要素は要素名の配列に格納されてあり、インデックスを指定することで特定の要素のみにアクセスすることも可能です。
たとえば、最初の例のようにp要素が複数存在しているとします。</p>

<p>
<pre>
 &lt;div&gt;
   &lt;h2&gt;ざっくりまとめ&lt;/h2&gt;
   &lt;p&gt;Firebug++&lt;/p&gt;
   &lt;p&gt;Firefoxもっと使おう！&lt;/p&gt;
 &lt;/div&gt; </pre>
</p>

<p>ここで、「Firebug++」というp要素だけにスタイルを設定したい場合は「p[0]」に対して設定を行うことになります。</p>

<p>
<pre>
s6.page({
	styles : {
		'p[0]' : {fontSize : '70%', margin : '1em'}
	}
});
</pre>
</p>


<h3>アクションの追加</h3>

<p>クリックで要素を非表示から表示に切り替えたり、移動させたり、なんかのアクション処理はs6.page()メソッドの中でactionsプロパティで設定を行います。
このときアクション対象の要素を選択することになりますが、選択方法は先に述べた「/」区切りの選択方法で要素を選択、特定します。</p>

<p>actionsプロパティは次のような仕様になっています。</p>

<p><pre>
s6.page({
	effects : [
		[ //１回目の右ボタンを押したときのイベント処理
			[対象要素, effect, 開始透明度？],
			[対象要素, effect, 開始透明度？]
		],[//2回目の右ボタンを押したときのイベント処理
			[対象要素, effect, 開始透明度？]
		]
	]
});
</pre></p>

<p>たとえばリスト要素に対して、ボタンを押すことで順に表示させるようなアクションをかけたい場合、次のような記述になります。</p>

<p>
<pre>
 &lt;div&gt;
 	&lt;ul&gt;
 		&lt;li&gt;ここに&lt;/li&gt;
 		&lt;li&gt;何かを&lt;/li&gt;
 		&lt;li&gt;置きたい&lt;/li&gt;
 	&lt;/ul&gt;
 	&lt;script&gt;
	s6.page({
		styles: {
			'ul/li' : {display : 'none'}
		},
		actions: [
			['ul/li[0]', 'fade in', 0.4],
			['ul/li[1]', 'fade in', 0.4],
			['ul/li[2]', 'fade in', 0.4]
		]
	});	
 	&lt;/script&gt;
 &lt;/div&gt;
</pre>
</p>

<p>最初にstylesプロパティで全li要素を不可視状態にしておいて、actionsプロパティで要素を1つづつ設定するのがポイントですね。</p>


<h3>まだまだ使いこなせてない</h3>
<p>S6、ざっと触ってみた限りまだまだ全機能にリーチはできていないです。エフェクト周りは全然使えてないし、（難関すぎますが）もっとソースを読みこなしたいかぎり。あとjQueryあたりと連携できるようになると、もっと使いやすくなるかなーという印象です。</p>

<p>とりあえず、もう少し使いこなせたら続きを書きたいと思いますよ。</p>
